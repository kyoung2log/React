`created at 25.02.17`

### 1. 자바스크립트 XML ?

- 자바스크립트 구문 확장자
- 컴파일러나 트랜스파일러에 의해 자바스크립트 코드로 변환되는 확장 구문
- 특징
  - JSX 내부에서 중괄호를 삽입해 자바스크립트 표현식을 사용할 수 있음
  - 프로퍼티는 카멜케이스를 사용해서 작성
  - JSX 앨리먼트나 컴포넌트는 대문자로 작성

### 2. JSX의 장점

- HTML과 유사해 읽고 쓰기 쉬움
- `<` 나 `>` 처럼 앨리먼트를 생성할 수 있는 문자는 엔티티코드(`&lt;`, `&gt;`)로 변환되어 보안에 좋음
- 타입스크립트 없이도 `JSDoc` 등을 사용해 오류를 잡아낼 수 있음
- 컴포넌트 기반 아키텍처로 유지보수에 용이함
- 리액트 외 다양한 라이브러리/프레임워크에서 지원

### 3. JSX의 약점

- 러닝커브가 필요함
- JS코드로 바꿔주는 전용도구(컴파일러) 필요
- HTML 형식의 코드와 JS 코드가 결합되어 관심사가 혼합됨
- `if`나 `switch` 문 등 일부 JS 미지원

### 4. 내부 동작

- **소스코드의 작동 원리**
  - 코드 조각은 컴파일러를 통해 컴퓨터가 이해할 수 있는 기계어로 변환된다.
  - 자바스크립트에서는 다음과 같은 3단계 과정을 거친다.
    - 토큰화 : 문자열을 토큰(의미를 갖는 최소 단위)으로 분해함
    - 구문 분석 : 분해한 토큰들을 구문트리(AST)로 변환함
    - 코드 생성 : AST를 기계어로 변환하여 실행한다.
      - V8에서는 **Ignition 인터프리터와 TuroboFan JIT 컴파일러를 실행한다.**
      - **Ignition 인터프리터의 경우 AST를 ByteCode로 변환하여 한 줄씩 다시 기계어로 변환해 실행한다. (빠르다는 장점이 있음)**
      - **TuroboFan JIT 컴파일러의 경우 변환된 ByteCode를 다시 컴파일해 기계어로 변환한다.**
      - 이 때 호출 빈도, 코드길이가 임계점을 넘는지 아닌지를 판단해 최적화 여부를 결정
- **JSX의 작동 원리**
  - JSX는 결국 새로운 구문이기에, 새로운 구문을 이해하는 엔진을 개발하거나, 기존 JS엔진이 새로운 구문을 이해하도록 해야한다.
  - 당연히, 후자가 더 간단하기에 JSX를 JS로 바꿔주는 친구가 필요한데, 얘네가 바벨, 타입스크립트, 트레이서, SWC가 하는 일이다.
  - 따라서 JSX는 구문분석기(렉서)를 통해 구문트리로 컴파일하는 “빌드”단계가 필요하다.

### 5. JSX 프라그마

- JS에서 `<` 연산자는 비교 연산할 때를 제외하면 인식하지 못함.
- 이를 이용해 JSX (컴파일러)는 `<`를 함수 호출로 변환하는 지시어로 사용된다.(또 다른 지시어로는 use strict가 있음)
- 프라그마는 다음과 같이 자바스크립트 코드(함수)가 된다.

  ```jsx
  // JSX 코드
  <MyComponent prop='속성값'>콘텐츠</MyComponent>;

  // JS 코드
  React.createElement(MyComponent, { prop: '속성값' }, '콘텐츠');
  ```

- 사실상 JSX프라그마는 React.createElement의 별칭에 불과함

### 6. 표현식

- JSX에서는 중괄호를 통해 JS코드를 넣을 수 있지만, 표현식이기 때문에 문장은 처리하지 못한다.
- 따라서 JSX 앨리먼트 내부에서는 `if문`, `선언문`을 평가 할 수 없고 표현식만이 평가된다.

### 🎊 복습하기

1. **JSX란 무엇이며 장단점은 무엇인가요 ?**
   - JSX는 JS의 확장 구문으로 HTML과 JS가 혼합된 로직을 쉽게 사용할 수 있다는 장점이 있다.
   - 책에서는 러닝커브가 있으며 컴파일러가 필요하다가 단점이라는데 난 모르겠다.
2. **JSX와 HTML의 차이점은 무엇인가요 ?**
   - HTML은 마크업 언어로 웹페이지가 어떻게 이루어져 있는지를 표현하는 문서
   - JSX는 자바스크립트 확장 구문으로 HTML과 유사하게 생겼지만 컴파일이라는 과정을 통해 JS로 변환되어 HTML에 적용된다.
3. **텍스트 문자열은 어떻게 기계어가 되나요 ?**
   - 토큰화 : 문자열을 이해할 수 있는 최소 단위인 토큰으로 분해함
   - 구문 분석 : 토큰들이 추상구문트리로 변환됨
   - 코드 생성 : 추상구문트리를 실행할 수 있는 기계어로 변환함
     - 좀 더 정확히는 Ignition 인터프리터를 통해 바이트 코드(중간코드)로 변환하여 한 줄씩 실행하고, TuroboFan 컴파일러를 통해 중간코드를 기계어로 변환하여 최적화한다.
4. **JSX 표현식이란 무엇이며 어떤 좋은점이 있나요?**
   - JSX 내부에서 JS 코드를 쓸 수 있게 해줘서 HTML을 동적으로 수정할 수 있도록 한다.
